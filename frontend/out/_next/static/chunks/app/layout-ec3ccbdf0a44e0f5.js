(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2430:(e,t,r)=>{Promise.resolve().then(r.bind(r,4867)),Promise.resolve().then(r.bind(r,4428)),Promise.resolve().then(r.t.bind(r,2605,23)),Promise.resolve().then(r.t.bind(r,357,23)),Promise.resolve().then(r.t.bind(r,4270,23))},4270:()=>{},4428:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>i});var a=r(3365),n=r(1521),s=r(8299);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[u,l]=(0,n.useState)(null),[h,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let{data:{session:e},error:t}=await s.N.auth.getSession();if(t);else{var r;l(e),i(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null)}c(!1)})();let{data:{subscription:e}}=s.N.auth.onAuthStateChange(async(e,t)=>{var r;l(t),i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),c(!1)});return()=>{e.unsubscribe()}},[]);let d=async(e,t,r)=>{try{let{data:a,error:n}=await s.N.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;if(a.user&&r){let{error:e}=await s.N.from("users").insert({id:a.user.id,email:a.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{let e="https://your-backend-url.com";e&&await fetch("".concat(e,"/api/auth/webhook/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.user.id})})}catch(e){}}return{data:a,error:null}}catch(e){return{data:null,error:e}}},p=async(e,t)=>{try{let{data:r,error:a}=await s.N.auth.signInWithPassword({email:e,password:t});if(a)throw a;if(r.user)try{let e="https://your-backend-url.com";e&&await fetch("".concat(e,"/api/auth/webhook/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(e){}return{data:r,error:null}}catch(e){return{data:null,error:e}}},m=async()=>{try{let{error:e}=await s.N.auth.signOut();if(e)throw e}catch(e){throw e}},v=async e=>{try{let{data:t,error:r}=await s.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}},y=async e=>{try{let{data:t,error:r}=await s.N.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}};return(0,a.jsx)(o.Provider,{value:{user:r,session:u,loading:h,signUp:d,signIn:p,signOut:m,resetPassword:v,updatePassword:y},children:t})}function u(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4867:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});var a=r(3365),n=r(7246),s=r(1971);let o=e=>{let{...t}=e,{theme:r="system"}=(0,n.D)();return(0,a.jsx)(s.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})}},8299:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var a=r(8777);let n="https://your-project.supabase.co",s="your-anon-key-here";if(!n||!s)throw Error("Missing required Supabase environment variables. Please set:\n- NEXT_PUBLIC_SUPABASE_URL\n- NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nGet these from your Supabase project settings.");let o=(0,a.UU)(n,s)}},e=>{var t=t=>e(e.s=t);e.O(0,[119,96,358],()=>t(2430)),_N_E=e.O()}]);