(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2430:(e,t,r)=>{Promise.resolve().then(r.bind(r,4867)),Promise.resolve().then(r.bind(r,4428)),Promise.resolve().then(r.t.bind(r,2605,23)),Promise.resolve().then(r.t.bind(r,357,23)),Promise.resolve().then(r.t.bind(r,4270,23))},4270:()=>{},4428:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>u});var a=r(3365),n=r(1521),s=r(8299),o=r(4089);let i=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[l,h]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let{data:{session:e},error:t}=await s.N.auth.getSession();if(t);else{var r;h(e),u(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null)}d(!1)})();let{data:{subscription:e}}=s.N.auth.onAuthStateChange(async(e,t)=>{var r;h(t),u(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),d(!1)});return()=>{e.unsubscribe()}},[]);let v=async(e,t,r)=>{try{let{data:a,error:n}=await s.N.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;if(a.user&&r){let{error:e}=await s.N.from("users").insert({id:a.user.id,email:a.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{let e=o.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch("".concat(e,"/api/auth/webhook/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.user.id})})}catch(e){}}return{data:a,error:null}}catch(e){return{data:null,error:e}}},_=async(e,t)=>{try{let{data:r,error:a}=await s.N.auth.signInWithPassword({email:e,password:t});if(a)throw a;if(r.user)try{let e=o.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch("".concat(e,"/api/auth/webhook/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(e){}return{data:r,error:null}}catch(e){return{data:null,error:e}}},p=async()=>{try{let{error:e}=await s.N.auth.signOut();if(e)throw e}catch(e){throw e}},w=async e=>{try{let{data:t,error:r}=await s.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}},m=async e=>{try{let{data:t,error:r}=await s.N.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}};return(0,a.jsx)(i.Provider,{value:{user:r,session:l,loading:c,signUp:v,signIn:_,signOut:p,resetPassword:w,updatePassword:m},children:t})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4867:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});var a=r(3365),n=r(7246),s=r(1971);let o=e=>{let{...t}=e,{theme:r="system"}=(0,n.D)();return(0,a.jsx)(s.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})}},8299:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var a=r(8777),n=r(4089);let s=n.env.NEXT_PUBLIC_SUPABASE_URL,o=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,a.UU)(s||"https://your-project.supabase.co",o||"your-anon-key-here")}},e=>{var t=t=>e(e.s=t);e.O(0,[897,639,96,358],()=>t(2430)),_N_E=e.O()}]);