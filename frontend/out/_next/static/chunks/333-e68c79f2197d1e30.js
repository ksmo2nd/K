"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{2770:(e,t,r)=>{r.d(t,{J:()=>i});var s=r(3365);r(1521);var a=r(2711),n=r(9671);function i(e){let{className:t,...r}=e;return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},4428:(e,t,r)=>{r.d(t,{A:()=>l,AuthProvider:()=>d});var s=r(3365),a=r(1521),n=r(8299),i=r(4089);let o=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e},error:t}=await n.N.auth.getSession();if(t);else{var r;c(e),d(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null)}h(!1)})();let{data:{subscription:e}}=n.N.auth.onAuthStateChange(async(e,t)=>{var r;c(t),d(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),h(!1)});return()=>{e.unsubscribe()}},[]);let m=async(e,t,r)=>{try{let{data:s,error:a}=await n.N.auth.signUp({email:e,password:t,options:{data:r}});if(a)throw a;if(s.user&&r){let{error:e}=await n.N.from("users").insert({id:s.user.id,email:s.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{let e=i.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch("".concat(e,"/api/auth/webhook/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.user.id})})}catch(e){}}return{data:s,error:null}}catch(e){return{data:null,error:e}}},p=async(e,t)=>{try{let{data:r,error:s}=await n.N.auth.signInWithPassword({email:e,password:t});if(s)throw s;if(r.user)try{let e=i.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch("".concat(e,"/api/auth/webhook/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(e){}return{data:r,error:null}}catch(e){return{data:null,error:e}}},x=async()=>{try{let{error:e}=await n.N.auth.signOut();if(e)throw e}catch(e){throw e}},f=async e=>{try{let{data:t,error:r}=await n.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}},w=async e=>{try{let{data:t,error:r}=await n.N.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}};return(0,s.jsx)(o.Provider,{value:{user:r,session:l,loading:u,signUp:m,signIn:p,signOut:x,resetPassword:f,updatePassword:w},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6170:(e,t,r)=>{r.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>l});var s=r(3365);r(1521);var a=r(9671);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},6333:(e,t,r)=>{r.d(t,{j:()=>f});var s=r(3365),a=r(1521),n=r(8600),i=r(7812),o=r(2770),d=r(6170),l=r(4428),c=r(1e3),u=r(5842),h=r(6309),m=r(3505),p=r(3678),x=r(2196);function f(e){let{onSuccess:t}=e,{updatePassword:r}=(0,l.A)(),[f,w]=(0,a.useState)({password:"",confirmPassword:""}),[v,b]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[N,j]=(0,a.useState)(!1),[P,_]=(0,a.useState)(null),[A,k]=(0,a.useState)(!1),S={length:f.password.length>=8,uppercase:/[A-Z]/.test(f.password),lowercase:/[a-z]/.test(f.password),number:/\d/.test(f.password),special:/[!@#$%^&*(),.?":{}|<>]/.test(f.password)},C=Object.values(S).every(Boolean),U=f.password===f.confirmPassword&&f.confirmPassword.length>0,E=async e=>{if(e.preventDefault(),j(!0),_(null),!C){_("Password does not meet requirements"),j(!1);return}if(!U){_("Passwords do not match"),j(!1);return}try{let{data:e,error:s}=await r(f.password);if(s)throw s;k(!0),setTimeout(()=>{null==t||t()},2e3)}catch(e){_(e.message||"Failed to update password. Please try again.")}finally{j(!1)}},B=(e,t)=>{w(r=>({...r,[e]:t})),_(null)},O=e=>{let{met:t,text:r}=e;return(0,s.jsxs)("div",{className:"flex items-center text-xs ".concat(t?"text-primary":"text-muted-foreground"),children:[t?(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}):(0,s.jsx)(x.A,{className:"h-3 w-3 mr-1"}),r]})};return A?(0,s.jsx)(d.Zp,{className:"w-full max-w-md mx-auto bg-card border-border",children:(0,s.jsxs)(d.aR,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/20",children:(0,s.jsx)(u.A,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)(d.ZB,{className:"text-2xl font-bold text-foreground",children:"Password Updated"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your password has been successfully updated. You will be redirected shortly."})]})}):(0,s.jsxs)(d.Zp,{className:"w-full max-w-md mx-auto bg-card border-border",children:[(0,s.jsxs)(d.aR,{className:"text-center",children:[(0,s.jsx)(d.ZB,{className:"text-2xl font-bold text-foreground",children:"Update Password"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Enter your new password"})]}),(0,s.jsxs)("form",{onSubmit:E,children:[(0,s.jsxs)(d.Wu,{className:"space-y-4",children:[P&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-400 bg-red-900/20 border border-red-800 rounded-md",children:P}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"password",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.p,{id:"password",type:v?"text":"password",placeholder:"Enter your new password",value:f.password,onChange:e=>B("password",e.target.value),required:!0,disabled:N,className:"pr-10"}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>b(!v),disabled:N,children:v?(0,s.jsx)(m.A,{className:"h-4 w-4"}):(0,s.jsx)(h.A,{className:"h-4 w-4"})})]}),f.password&&(0,s.jsxs)("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[(0,s.jsx)(O,{met:S.length,text:"At least 8 characters"}),(0,s.jsx)(O,{met:S.uppercase,text:"One uppercase letter"}),(0,s.jsx)(O,{met:S.lowercase,text:"One lowercase letter"}),(0,s.jsx)(O,{met:S.number,text:"One number"}),(0,s.jsx)(O,{met:S.special,text:"One special character"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.p,{id:"confirmPassword",type:g?"text":"password",placeholder:"Confirm your new password",value:f.confirmPassword,onChange:e=>B("confirmPassword",e.target.value),required:!0,disabled:N,className:"pr-10"}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>y(!g),disabled:N,children:g?(0,s.jsx)(m.A,{className:"h-4 w-4"}):(0,s.jsx)(h.A,{className:"h-4 w-4"})})]}),f.confirmPassword&&(0,s.jsx)("div",{className:"text-xs ".concat(U?"text-green-600":"text-red-600"),children:U?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Passwords match"]}):(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Passwords do not match"]})})]})]}),(0,s.jsx)(d.wL,{children:(0,s.jsx)(n.$,{type:"submit",className:"w-full",disabled:N||!C||!U,children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"})})]})]})}},7812:(e,t,r)=>{r.d(t,{p:()=>n});var s=r(3365);r(1521);var a=r(9671);function n(e){let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},8299:(e,t,r)=>{r.d(t,{N:()=>o});var s=r(8777),a=r(4089);let n=a.env.NEXT_PUBLIC_SUPABASE_URL,i=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,s.UU)(n||"https://your-project.supabase.co",i||"your-anon-key-here")},8600:(e,t,r)=>{r.d(t,{$:()=>d});var s=r(3365);r(1521);var a=r(9884),n=r(2934),i=r(9671);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:n,asChild:d=!1,...l}=e,c=d?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:n,className:t})),...l})}},9671:(e,t,r)=>{r.d(t,{cn:()=>n});var s=r(4584),a=r(2292);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}}]);