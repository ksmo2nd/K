exports.id=607,exports.ids=[607],exports.modules={926:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9782,23)),Promise.resolve().then(r.t.bind(r,3552,23)),Promise.resolve().then(r.t.bind(r,708,23)),Promise.resolve().then(r.t.bind(r,7319,23)),Promise.resolve().then(r.t.bind(r,2079,23)),Promise.resolve().then(r.t.bind(r,868,23)),Promise.resolve().then(r.t.bind(r,5543,23)),Promise.resolve().then(r.t.bind(r,2241,23))},1332:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(8625);r(4996);var a=r(6761);function n({className:e,type:t,...r}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},1552:(e,t,r)=>{Promise.resolve().then(r.bind(r,2361)),Promise.resolve().then(r.bind(r,8654))},2361:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});var s=r(8625),a=r(7972),n=r(2647);let o=({...e})=>{let{theme:t="system"}=(0,a.D)();return(0,s.jsx)(n.l$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})}},2511:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>s});let s=(0,r(413).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/frontend/components/ui/sonner.tsx","Toaster")},3161:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var s=r(9167);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,s.UU)(a||"https://your-project.supabase.co",n||"your-anon-key-here")},4704:(e,t,r)=>{Promise.resolve().then(r.bind(r,2511)),Promise.resolve().then(r.bind(r,9180))},5136:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>l});var s=r(8625);r(4996);var a=r(6761);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},5918:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(8625);r(4996);var a=r(2337),n=r(4714),o=r(6761);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:t,size:r,asChild:n=!1,...d}){let l=n?a.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:r,className:e})),...d})}},6761:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(9958),a=r(9802);function n(...e){return(0,a.QP)((0,s.$)(e))}},7190:()=>{},7898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>c});var s=r(7307),a=r(4625),n=r.n(a),o=r(2033),i=r.n(o),d=r(9180),l=r(2511);r(7190);let c={title:"KSWiFi - Virtual eSIM Data Manager",description:"Download data packs on WiFi, activate anywhere with eSIM",generator:"KSWiFi"};function u({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsx)("head",{children:(0,s.jsx)("style",{children:`
html {
  font-family: ${n().style.fontFamily};
  --font-sans: ${n().variable};
  --font-mono: ${i().variable};
}
        `})}),(0,s.jsx)("body",{children:(0,s.jsxs)(d.AuthProvider,{children:[e,(0,s.jsx)(l.Toaster,{})]})})]})}},8352:(e,t,r)=>{"use strict";r.d(t,{j:()=>v});var s=r(8625),a=r(4996),n=r(5918),o=r(1332),i=r(8390),d=r(5136),l=r(8654),c=r(2494),u=r(5818),m=r(1802),h=r(4975),p=r(7195),x=r(3272);function v({onSuccess:e}){let{updatePassword:t}=(0,l.A)(),[r,v]=(0,a.useState)({password:"",confirmPassword:""}),[f,b]=(0,a.useState)(!1),[w,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[N,P]=(0,a.useState)(null),[A,C]=(0,a.useState)(!1),_={length:r.password.length>=8,uppercase:/[A-Z]/.test(r.password),lowercase:/[a-z]/.test(r.password),number:/\d/.test(r.password),special:/[!@#$%^&*(),.?":{}|<>]/.test(r.password)},k=Object.values(_).every(Boolean),S=r.password===r.confirmPassword&&r.confirmPassword.length>0,U=async s=>{if(s.preventDefault(),j(!0),P(null),!k){P("Password does not meet requirements"),j(!1);return}if(!S){P("Passwords do not match"),j(!1);return}try{let{data:s,error:a}=await t(r.password);if(a)throw a;C(!0),setTimeout(()=>{e?.()},2e3)}catch(e){P(e.message||"Failed to update password. Please try again.")}finally{j(!1)}},E=(e,t)=>{v(r=>({...r,[e]:t})),P(null)},T=({met:e,text:t})=>(0,s.jsxs)("div",{className:`flex items-center text-xs ${e?"text-primary":"text-muted-foreground"}`,children:[e?(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}):(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"}),t]});return A?(0,s.jsx)(d.Zp,{className:"w-full max-w-md mx-auto bg-card border-border",children:(0,s.jsxs)(d.aR,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/20",children:(0,s.jsx)(m.A,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)(d.ZB,{className:"text-2xl font-bold text-foreground",children:"Password Updated"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your password has been successfully updated. You will be redirected shortly."})]})}):(0,s.jsxs)(d.Zp,{className:"w-full max-w-md mx-auto bg-card border-border",children:[(0,s.jsxs)(d.aR,{className:"text-center",children:[(0,s.jsx)(d.ZB,{className:"text-2xl font-bold text-foreground",children:"Update Password"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Enter your new password"})]}),(0,s.jsxs)("form",{onSubmit:U,children:[(0,s.jsxs)(d.Wu,{className:"space-y-4",children:[N&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-400 bg-red-900/20 border border-red-800 rounded-md",children:N}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.J,{htmlFor:"password",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.p,{id:"password",type:f?"text":"password",placeholder:"Enter your new password",value:r.password,onChange:e=>E("password",e.target.value),required:!0,disabled:y,className:"pr-10"}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>b(!f),disabled:y,children:f?(0,s.jsx)(h.A,{className:"h-4 w-4"}):(0,s.jsx)(p.A,{className:"h-4 w-4"})})]}),r.password&&(0,s.jsxs)("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[(0,s.jsx)(T,{met:_.length,text:"At least 8 characters"}),(0,s.jsx)(T,{met:_.uppercase,text:"One uppercase letter"}),(0,s.jsx)(T,{met:_.lowercase,text:"One lowercase letter"}),(0,s.jsx)(T,{met:_.number,text:"One number"}),(0,s.jsx)(T,{met:_.special,text:"One special character"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.J,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.p,{id:"confirmPassword",type:w?"text":"password",placeholder:"Confirm your new password",value:r.confirmPassword,onChange:e=>E("confirmPassword",e.target.value),required:!0,disabled:y,className:"pr-10"}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!w),disabled:y,children:w?(0,s.jsx)(h.A,{className:"h-4 w-4"}):(0,s.jsx)(p.A,{className:"h-4 w-4"})})]}),r.confirmPassword&&(0,s.jsx)("div",{className:`text-xs ${S?"text-green-600":"text-red-600"}`,children:S?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Passwords match"]}):(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Passwords do not match"]})})]})]}),(0,s.jsx)(d.wL,{children:(0,s.jsx)(n.$,{type:"submit",className:"w-full",disabled:y||!k||!S,children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"})})]})]})}},8390:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(8625);r(4996);var a=r(5498),n=r(6761);function o({className:e,...t}){return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},8654:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>i});var s=r(8625),a=r(4996),n=r(3161);let o=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),u=async(e,t,r)=>{try{let{data:s,error:a}=await n.N.auth.signUp({email:e,password:t,options:{data:r}});if(a)throw a;if(s.user&&r){let{error:e}=await n.N.from("users").insert({id:s.user.id,email:s.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{let e=process.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch(`${e}/api/auth/webhook/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.user.id})})}catch(e){}}return{data:s,error:null}}catch(e){return{data:null,error:e}}},m=async(e,t)=>{try{let{data:r,error:s}=await n.N.auth.signInWithPassword({email:e,password:t});if(s)throw s;if(r.user)try{let e=process.env.NEXT_PUBLIC_BACKEND_URL;e&&await fetch(`${e}/api/auth/webhook/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(e){}return{data:r,error:null}}catch(e){return{data:null,error:e}}},h=async()=>{try{let{error:e}=await n.N.auth.signOut();if(e)throw e}catch(e){throw e}},p=async e=>{try{let{data:t,error:r}=await n.N.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}},x=async e=>{try{let{data:t,error:r}=await n.N.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}};return(0,s.jsx)(o.Provider,{value:{user:t,session:i,loading:l,signUp:u,signIn:m,signOut:h,resetPassword:p,updatePassword:x},children:e})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9180:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>a});var s=r(413);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/frontend/lib/auth-context.tsx","AuthProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/frontend/lib/auth-context.tsx","useAuth")},9382:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8416,23)),Promise.resolve().then(r.t.bind(r,7342,23)),Promise.resolve().then(r.t.bind(r,4078,23)),Promise.resolve().then(r.t.bind(r,4193,23)),Promise.resolve().then(r.t.bind(r,1573,23)),Promise.resolve().then(r.t.bind(r,5405,23)),Promise.resolve().then(r.t.bind(r,9682,23)),Promise.resolve().then(r.t.bind(r,6159,23))}};