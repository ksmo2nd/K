(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2430:(t,e,r)=>{Promise.resolve().then(r.bind(r,4867)),Promise.resolve().then(r.bind(r,4428)),Promise.resolve().then(r.t.bind(r,2605,23)),Promise.resolve().then(r.t.bind(r,357,23)),Promise.resolve().then(r.t.bind(r,4270,23))},4270:()=>{},4428:(t,e,r)=>{"use strict";r.d(e,{A:()=>u,AuthProvider:()=>l});var a=r(3365),n=r(1521),i=r(8299),s=r(4089);let o=(0,n.createContext)(void 0);function l(t){let{children:e}=t,[r,l]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let{data:{session:t},error:e}=await i.N.auth.getSession();if(e);else{var r;h(t),l(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null)}d(!1)})();let{data:{subscription:t}}=i.N.auth.onAuthStateChange(async(t,e)=>{var r;h(e),l(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null),d(!1)});return()=>{t.unsubscribe()}},[]);let v=async(t,e,r)=>{try{let{data:a,error:n}=await i.N.auth.signUp({email:t,password:e,options:{data:r}});if(n)throw n;if(a.user&&r){let{error:t}=await i.N.from("users").insert({id:a.user.id,email:a.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{await fetch("".concat(s.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000","/api/auth/webhook/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.user.id})})}catch(t){}}return{data:a,error:null}}catch(t){return{data:null,error:t}}},m=async(t,e)=>{try{let{data:r,error:a}=await i.N.auth.signInWithPassword({email:t,password:e});if(a)throw a;if(r.user)try{await fetch("".concat(s.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000","/api/auth/webhook/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(t){}return{data:r,error:null}}catch(t){return{data:null,error:t}}},p=async()=>{try{let{error:t}=await i.N.auth.signOut();if(t)throw t}catch(t){throw t}},w=async t=>{try{let{data:e,error:r}=await i.N.auth.resetPasswordForEmail(t,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{data:e,error:null}}catch(t){return{data:null,error:t}}},y=async t=>{try{let{data:e,error:r}=await i.N.auth.updateUser({password:t});if(r)throw r;return{data:e,error:null}}catch(t){return{data:null,error:t}}};return(0,a.jsx)(o.Provider,{value:{user:r,session:u,loading:c,signUp:v,signIn:m,signOut:p,resetPassword:w,updatePassword:y},children:e})}function u(){let t=(0,n.useContext)(o);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},4867:(t,e,r)=>{"use strict";r.d(e,{Toaster:()=>s});var a=r(3365),n=r(7246),i=r(1971);let s=t=>{let{...e}=t,{theme:r="system"}=(0,n.D)();return(0,a.jsx)(i.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})}},8299:(t,e,r)=>{"use strict";r.d(e,{N:()=>a});let a=(0,r(8777).UU)("http://localhost:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0")}},t=>{var e=e=>t(t.s=e);t.O(0,[119,96,358],()=>e(2430)),_N_E=t.O()}]);