(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2430:(t,e,r)=>{Promise.resolve().then(r.bind(r,4867)),Promise.resolve().then(r.bind(r,4428)),Promise.resolve().then(r.t.bind(r,2605,23)),Promise.resolve().then(r.t.bind(r,357,23)),Promise.resolve().then(r.t.bind(r,4270,23))},4270:()=>{},4428:(t,e,r)=>{"use strict";r.d(e,{A:()=>u,AuthProvider:()=>i});var a=r(3365),n=r(1521),s=r(8299);let o=(0,n.createContext)(void 0);function i(t){let{children:e}=t,[r,i]=(0,n.useState)(null),[u,l]=(0,n.useState)(null),[h,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let{data:{session:t},error:e}=await s.N.auth.getSession();if(e);else{var r;l(t),i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null)}c(!1)})();let{data:{subscription:t}}=s.N.auth.onAuthStateChange(async(t,e)=>{var r;l(e),i(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null),c(!1)});return()=>{t.unsubscribe()}},[]);let d=async(t,e,r)=>{try{let{data:a,error:n}=await s.N.auth.signUp({email:t,password:e,options:{data:r}});if(n)throw n;if(a.user&&r){let{error:t}=await s.N.from("users").insert({id:a.user.id,email:a.user.email,first_name:r.first_name,last_name:r.last_name,phone_number:r.phone_number,status:"active",is_admin:!1});try{let t="https://test-backend.com";t&&await fetch("".concat(t,"/api/auth/webhook/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.user.id})})}catch(t){}}return{data:a,error:null}}catch(t){return{data:null,error:t}}},p=async(t,e)=>{try{let{data:r,error:a}=await s.N.auth.signInWithPassword({email:t,password:e});if(a)throw a;if(r.user)try{let t="https://test-backend.com";t&&await fetch("".concat(t,"/api/auth/webhook/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user.id})})}catch(t){}return{data:r,error:null}}catch(t){return{data:null,error:t}}},m=async()=>{try{let{error:t}=await s.N.auth.signOut();if(t)throw t}catch(t){throw t}},v=async t=>{try{let{data:e,error:r}=await s.N.auth.resetPasswordForEmail(t,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{data:e,error:null}}catch(t){return{data:null,error:t}}},w=async t=>{try{let{data:e,error:r}=await s.N.auth.updateUser({password:t});if(r)throw r;return{data:e,error:null}}catch(t){return{data:null,error:t}}};return(0,a.jsx)(o.Provider,{value:{user:r,session:u,loading:h,signUp:d,signIn:p,signOut:m,resetPassword:v,updatePassword:w},children:e})}function u(){let t=(0,n.useContext)(o);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},4867:(t,e,r)=>{"use strict";r.d(e,{Toaster:()=>o});var a=r(3365),n=r(7246),s=r(1971);let o=t=>{let{...e}=t,{theme:r="system"}=(0,n.D)();return(0,a.jsx)(s.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})}},8299:(t,e,r)=>{"use strict";r.d(e,{N:()=>o});var a=r(8777);let n="https://test.supabase.co",s="test_key";if(!n||!s)throw Error("Missing required Supabase environment variables. Please set:\n- NEXT_PUBLIC_SUPABASE_URL\n- NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nGet these from your Supabase project settings.");let o=(0,a.UU)(n,s)}},t=>{var e=e=>t(t.s=e);t.O(0,[119,96,358],()=>e(2430)),_N_E=t.O()}]);